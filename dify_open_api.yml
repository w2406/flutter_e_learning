openapi: 3.0.1
info:
  title: Difyãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³API
  version: v1
  description: |
    ã“ã®APIã¯Difyãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã®é€£æºã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æ°¸ç¶šæ€§ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€è¨­å®šå–å¾—ãªã©ã€æ§˜ã€…ãªæ©Ÿèƒ½ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

servers:
  - url: http://localhost/v1
    description: ãƒ­ãƒ¼ã‚«ãƒ«ã®Dify APIã‚µãƒ¼ãƒãƒ¼

security:
  - ApiKeyAuth: []

components:
  securitySchemes:
    ApiKeyAuth:
      type: http
      scheme: bearer
      bearerFormat: API_KEY
      description: |
        APIã‚­ãƒ¼èªè¨¼ã§ã™ã€‚
        APIã‚­ãƒ¼ã¯ã‚µãƒ¼ãƒãƒ¼å´ã§å³é‡ã«ç®¡ç†ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã«å…±æœ‰ã—ãŸã‚Šä¿å­˜ã—ãŸã‚Šã—ãªã„ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚
        APIã‚­ãƒ¼ã®æ¼æ´©ã¯æ·±åˆ»ãªçµæœã‚’æ‹›ãå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

  schemas:
    FileObject:
      type: object
      description: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®æƒ…å ±ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        type:
          type: string
          description: ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¨®é¡ã€‚
          enum:
            - document
            - image
            - audio
            - video
            - custom
        transfer_method:
          type: string
          description: ãƒ•ã‚¡ã‚¤ãƒ«ã®è»¢é€æ–¹æ³•ã€‚'remote_url'ã¯ç”»åƒURLç”¨ã€'local_file'ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”¨ã§ã™ã€‚
          enum:
            - remote_url
            - local_file
        url:
          type: string
          description: ç”»åƒURLï¼ˆ`transfer_method`ãŒ`remote_url`ã®å ´åˆã«æŒ‡å®šï¼‰ã€‚
          format: uri
        upload_file_id:
          type: string
          description: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«IDã€‚äº‹å‰ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰APIã§å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆ`transfer_method`ãŒ`local_file`ã®å ´åˆã«æŒ‡å®šï¼‰ã€‚
      required:
        - type
        - transfer_method

    ChatCompletionRequest:
      type: object
      description: ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹éš›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        query:
          type: string
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›/è³ªå•å†…å®¹ã€‚
          example: "iPhone 13 Pro Maxã®ä»•æ§˜ã¯ä½•ã§ã™ã‹ï¼Ÿ"
        inputs:
          type: object
          description: |
            ã‚¢ãƒ—ãƒªã§å®šç¾©ã•ã‚ŒãŸæ§˜ã€…ãªå¤‰æ•°å€¤ã‚’å…¥åŠ›ã§ãã¾ã™ã€‚
            'inputs'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã¯è¤‡æ•°ã®ã‚­ãƒ¼/å€¤ã®ãƒšã‚¢ãŒå«ã¾ã‚Œã€å„ã‚­ãƒ¼ãŒç‰¹å®šã®å¤‰æ•°ã«å¯¾å¿œã—ã€å„å€¤ãŒãã®å¤‰æ•°ã®å…·ä½“çš„ãªå€¤ã¨ãªã‚Šã¾ã™ã€‚
            å¤‰æ•°ãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã®å ´åˆã€å¾Œè¿°ã®'files'ã§è¨˜è¿°ã•ã‚ŒãŸã‚­ãƒ¼ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã—ã¾ã™ã€‚
            ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ {} ã§ã™ã€‚
          additionalProperties: true
        response_mode:
          type: string
          description: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®è¿”å´ãƒ¢ãƒ¼ãƒ‰ã€‚'streaming'ï¼ˆæ¨å¥¨ï¼‰ã¾ãŸã¯'blocking'ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚
          enum:
            - streaming
            - blocking
          default: streaming
        user:
          type: string
          description: |
            ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€‚ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è­˜åˆ¥ã®ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã€çµ±è¨ˆã«åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚
            é–‹ç™ºè€…ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã«ãªã‚‹ã‚ˆã†ã«å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
          example: "abc-123"
        conversation_id:
          type: string
          description: |
            ä¼šè©±IDã€‚ä»¥å‰ã®ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã«åŸºã¥ã„ã¦ä¼šè©±ã‚’ç¶šã‘ã‚‹å ´åˆã€
            ä»¥å‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®`conversation_id`ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
          example: ""
        files:
          type: array
          description: |
            ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã€‚ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã‚’ãƒ†ã‚­ã‚¹ãƒˆç†è§£ã‚„è³ªå•å¿œç­”ã¨çµ„ã¿åˆã‚ã›ã‚‹ã®ã«é©ã—ã¦ã„ã¾ã™ã€‚
            ãƒ¢ãƒ‡ãƒ«ãŒãƒ“ã‚¸ãƒ§ãƒ³æ©Ÿèƒ½ã«å¯¾å¿œã—ã¦ã„ã‚‹å ´åˆã«ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™ã€‚
          items:
            $ref: "#/components/schemas/FileObject"
          example:
            - type: "image"
              transfer_method: "remote_url"
              url: "https://cloud.dify.ai/logo/logo-site.png"
        auto_generate_name:
          type: boolean
          description: |
            ä¼šè©±ã‚¿ã‚¤ãƒˆãƒ«ã®è‡ªå‹•ç”Ÿæˆã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯`true`ã§ã™ã€‚
            `false`ã«è¨­å®šã™ã‚‹ã¨ã€ä¼šè©±åå¤‰æ›´APIã‚’å‘¼ã³å‡ºã—ã¦`auto_generate`ã‚’`true`ã«è¨­å®šã™ã‚‹ã“ã¨ã§éåŒæœŸã«ã‚¿ã‚¤ãƒˆãƒ«ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚
          default: true
      required:
        - query

    ChatCompletionResponse:
      type: object
      description: ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡å¾Œã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        event:
          type: string
          description: ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã€‚å¸¸ã«`message`ã€‚
          example: "message"
        task_id:
          type: string
          description: ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          example: "c3800678-a077-43df-a102-53f23ed20b88"
        id:
          type: string
          description: ä¸€æ„ã®IDã€‚
          example: "9da23599-e713-473b-982c-4328d4f5c78a"
        message_id:
          type: string
          description: ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
          example: "9da23599-e713-473b-982c-4328d4f5c78a"
        conversation_id:
          type: string
          description: ä¼šè©±IDã€‚
          example: "45701982-8118-4bc5-8e9b-64562b4555f2"
        mode:
          type: string
          description: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰ã€‚å¸¸ã«`chat`ã€‚
          example: "chat"
        answer:
          type: string
          description: å®Œå…¨ãªå¿œç­”å†…å®¹ã€‚
          example: "iPhone 13 Pro Maxã®ä»•æ§˜ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™:..."
        metadata:
          type: object
          description: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€‚
          properties:
            usage:
              type: object
              description: ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ãªã©ã®æƒ…å ±ã€‚
              properties:
                prompt_tokens:
                  type: integer
                  description: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã€‚
                prompt_unit_price:
                  type: string
                  description: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å˜ä¾¡ã€‚
                prompt_price_unit:
                  type: string
                  description: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä¾¡æ ¼å˜ä½ã€‚
                prompt_price:
                  type: string
                  description: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä¾¡æ ¼ã€‚
                completion_tokens:
                  type: integer
                  description: å®Œäº†ã®ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã€‚
                completion_unit_price:
                  type: string
                  description: å®Œäº†ã®å˜ä¾¡ã€‚
                completion_price_unit:
                  type: string
                  description: å®Œäº†ã®ä¾¡æ ¼å˜ä½ã€‚
                completion_price:
                  type: string
                  description: å®Œäº†ã®ä¾¡æ ¼ã€‚
                total_tokens:
                  type: integer
                  description: åˆè¨ˆãƒˆãƒ¼ã‚¯ãƒ³æ•°ã€‚
                total_price:
                  type: string
                  description: åˆè¨ˆä¾¡æ ¼ã€‚
                currency:
                  type: string
                  description: é€šè²¨ã€‚
                latency:
                  type: number
                  description: ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼ˆå‡¦ç†æ™‚é–“ï¼‰ã€‚
            retriever_resources:
              type: array
              description: æ¤œç´¢ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã®ãƒªã‚¹ãƒˆã€‚
              items:
                $ref: "#/components/schemas/RetrieverResource"
        created_at:
          type: integer
          description: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚"
          example: 1705407629

    RetrieverResource:
      type: object
      description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆæ™‚ã«å‚ç…§ã•ã‚ŒãŸæ¤œç´¢ãƒªã‚½ãƒ¼ã‚¹ã®è©³ç´°ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        position:
          type: integer
          description: æ¤œç´¢çµæœã®é †ä½ã€‚
        dataset_id:
          type: string
          description: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆIDã€‚
        dataset_name:
          type: string
          description: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåã€‚
        document_id:
          type: string
          description: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆIDã€‚
        document_name:
          type: string
          description: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåã€‚
        segment_id:
          type: string
          description: ã‚»ã‚°ãƒ¡ãƒ³ãƒˆIDã€‚
        score:
          type: number
          description: æ¤œç´¢ã‚¹ã‚³ã‚¢ã€‚
          format: float
        content:
          type: string
          description: æ¤œç´¢ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å†…å®¹ã€‚

    ChunkCompletionResponse:
      type: string
      description: |
        ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰å‡ºåŠ›ã•ã‚Œã‚‹ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒãƒ£ãƒ³ã‚¯ã‚’å®šç¾©ã—ã¾ã™ã€‚
        `Content-Type`ã¯`text/event-stream`ã§ã™ã€‚
        å„ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒãƒ£ãƒ³ã‚¯ã¯`data:`ã§å§‹ã¾ã‚Šã€`\n\n`ã®2ã¤ã®æ”¹è¡Œæ–‡å­—ã§åŒºåˆ‡ã‚‰ã‚Œã¾ã™ã€‚
        ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒãƒ£ãƒ³ã‚¯ã®æ§‹é€ ã¯ã‚¤ãƒ™ãƒ³ãƒˆã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚

        - `event: message`: LLMãŒãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯ã‚’è¿”ã™ã‚¤ãƒ™ãƒ³ãƒˆã€‚ã¤ã¾ã‚Šã€å®Œå…¨ãªãƒ†ã‚­ã‚¹ãƒˆãŒãƒãƒ£ãƒ³ã‚¯å½¢å¼ã§å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `message_id` (string): ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
          - `conversation_id` (string): ä¼šè©±IDã€‚
          - `answer` (string): LLMãŒè¿”ã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯ã®å†…å®¹ã€‚
          - `created_at` (int): ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚
        - `event: message_file`: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã€‚ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚
          - `id` (string): ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€æ„ã®IDã€‚
          - `type` (string): ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã€‚ç¾åœ¨`image`ã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã¾ã™ã€‚
          - `belongs_to` (string): æ‰€å±ã€‚ç¾åœ¨`assistant`ã®ã¿ã€‚
          - `url` (string): ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ¢ãƒ¼ãƒˆURLã€‚
          - `conversation_id` (string): ä¼šè©±IDã€‚
        - `event: message_end`: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã€‚ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã™ã‚‹ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãŒçµ‚äº†ã—ãŸã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `message_id` (string): ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
          - `conversation_id` (string): ä¼šè©±IDã€‚
          - `metadata` (object): `usage`ï¼ˆä½¿ç”¨çŠ¶æ³ï¼‰ã¨`retriever_resources`ï¼ˆRetrieverResourceã®é…åˆ—ï¼‰ã‚’å«ã‚€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€‚
        - `event: tts_message`: TTSï¼ˆText-to-Speechï¼‰éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã€‚éŸ³å£°åˆæˆå‡ºåŠ›ã§ã™ã€‚å†…å®¹ã¯Mp3å½¢å¼ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ–ãƒ­ãƒƒã‚¯ã§ã€base64æ–‡å­—åˆ—ã¨ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã™ã€‚å†ç”Ÿæ™‚ã«ã¯ã€base64ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ä¾›çµ¦ã™ã‚‹ã ã‘ã§ã™ã€‚ï¼ˆã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯è‡ªå‹•å†ç”ŸãŒæœ‰åŠ¹ãªå ´åˆã«ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™ï¼‰ã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®å¿œç­”åœæ­¢ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `message_id` (string): ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
          - `audio` (string): éŸ³å£°åˆæˆå¾Œã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã€‚base64ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã™ã€‚å†ç”Ÿæ™‚ã«ã¯ã€base64ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ä¾›çµ¦ã™ã‚‹ã ã‘ã§ã™ã€‚
          - `created_at` (int): ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚
        - `event: tts_message_end`: TTSéŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã€‚ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã™ã‚‹ã¨éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒçµ‚äº†ã—ãŸã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®å¿œç­”åœæ­¢ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `message_id` (string): ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
          - `audio` (string): çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã«ã¯ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãŒãªã„ãŸã‚ç©ºæ–‡å­—åˆ—ã€‚
          - `created_at` (int): ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚
        - `event: message_replace`: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç½®ãæ›ãˆã‚¤ãƒ™ãƒ³ãƒˆã€‚å‡ºåŠ›ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒæœ‰åŠ¹ãªå ´åˆã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒãƒ•ãƒ©ã‚°ä»˜ã‘ã•ã‚Œã‚‹ã¨ã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä»‹ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒäº‹å‰è¨­å®šã•ã‚ŒãŸè¿”ä¿¡ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `message_id` (string): ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
          - `conversation_id` (string): ä¼šè©±IDã€‚
          - `answer` (string): ç½®ãæ›ãˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆLLMã®å¿œç­”ãƒ†ã‚­ã‚¹ãƒˆå…¨ä½“ã‚’ç›´æ¥ç½®ãæ›ãˆã¾ã™ï¼‰ã€‚
          - `created_at` (int): ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚
        - `event: workflow_started`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œé–‹å§‹ã‚¤ãƒ™ãƒ³ãƒˆã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `workflow_run_id` (string): ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã®ä¸€æ„ã®IDã€‚
          - `event` (string): å›ºå®šã§`workflow_started`ã€‚
          - `data` (object): `id` (string), `workflow_id` (string), `sequence_number` (int), `created_at` (ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)ãªã©ã®è©³ç´°ã€‚
        - `event: node_started`: ãƒãƒ¼ãƒ‰å®Ÿè¡Œé–‹å§‹ã‚¤ãƒ™ãƒ³ãƒˆã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `workflow_run_id` (string): ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã®ä¸€æ„ã®IDã€‚
          - `event` (string): å›ºå®šã§`node_started`ã€‚
          - `data` (object): `id` (string), `node_id` (string), `node_type` (string), `title` (string), `index` (int), `predecessor_node_id` (string, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `inputs` (object), `created_at` (ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)ãªã©ã®è©³ç´°ã€‚
        - `event: node_finished`: ãƒãƒ¼ãƒ‰å®Ÿè¡Œçµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã€‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«ã‚ˆã£ã¦æˆåŠŸã¾ãŸã¯å¤±æ•—ãŒç¤ºã•ã‚Œã¾ã™ã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `workflow_run_id` (string): ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã®ä¸€æ„ã®IDã€‚
          - `event` (string): å›ºå®šã§`node_finished`ã€‚
          - `data` (object): `id` (string), `node_id` (string), `node_type` (string), `title` (string), `index` (int), `predecessor_node_id` (string, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `inputs` (object), `process_data` (json, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `outputs` (json, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `status` (string, `running` / `succeeded` / `failed` / `stopped`), `error` (string, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `elapsed_time` (float, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `execution_metadata` (json), `created_at` (ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)ãªã©ã®è©³ç´°ã€‚
        - `event: workflow_finished`: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œçµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã€‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«ã‚ˆã£ã¦æˆåŠŸã¾ãŸã¯å¤±æ•—ãŒç¤ºã•ã‚Œã¾ã™ã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `workflow_run_id` (string): ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã®ä¸€æ„ã®IDã€‚
          - `event` (string): å›ºå®šã§`workflow_finished`ã€‚
          - `data` (object): `id` (string), `workflow_id` (string), `status` (string, `running` / `succeeded` / `failed` / `stopped`), `outputs` (json, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `error` (string, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `elapsed_time` (float, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `total_tokens` (int, ã‚ªãƒ—ã‚·ãƒ§ãƒ³), `total_steps` (int), `created_at` (ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—), `finished_at` (ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)ãªã©ã®è©³ç´°ã€‚
        - `event: error`: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ä¸­ã®ä¾‹å¤–ãŒã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦å‡ºåŠ›ã•ã‚Œã€ã‚¨ãƒ©ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã™ã‚‹ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯çµ‚äº†ã—ã¾ã™ã€‚
          - `task_id` (string): ã‚¿ã‚¹ã‚¯IDã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®è¿½è·¡ã‚„ã€å¾Œè¿°ã®ç”Ÿæˆåœæ­¢APIã§ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
          - `message_id` (string): ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
          - `status` (int): HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã€‚
          - `code` (string): ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã€‚
          - `message` (string): ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚
        - `event: ping`: æ¥ç¶šã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«10ç§’ã”ã¨ã«ç™ºç”Ÿã™ã‚‹pingã‚¤ãƒ™ãƒ³ãƒˆã€‚

    FileUploadResponse:
      type: object
      description: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        id:
          type: string
          description: IDã€‚
          format: uuid
          example: "72fa9618-8f89-4a37-9b33-7e1178a24a67"
        name:
          type: string
          description: ãƒ•ã‚¡ã‚¤ãƒ«åã€‚
          example: "example.png"
        size:
          type: integer
          description: ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼ˆãƒã‚¤ãƒˆå˜ä½ï¼‰ã€‚
          example: 1024
        extension:
          type: string
          description: ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ã€‚
          example: "png"
        mime_type:
          type: string
          description: ãƒ•ã‚¡ã‚¤ãƒ«ã®MIMEã‚¿ã‚¤ãƒ—ã€‚
          example: "image/png"
        created_by:
          type: string
          description: ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã€‚
          format: uuid
          example: "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13"
        created_at:
          type: integer
          description: "ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚"
          example: 1577836800

    StopGenerateRequest:
      type: object
      description: ç”Ÿæˆåœæ­¢ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        user:
          type: string
          description: |
            ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€‚ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è­˜åˆ¥ã®ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã€
            ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æ¸¡ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ä¸€è‡´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
          example: "abc-123"
      required:
        - user

    SuccessResponse:
      type: object
      description: æˆåŠŸæ™‚ã®æ±ç”¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        result:
          type: string
          description: å¸¸ã«"success"ã‚’è¿”ã—ã¾ã™ã€‚
          example: "success"

    MessageFeedbackRequest:
      type: object
      description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡ã™ã‚‹éš›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        rating:
          type: string
          description: |
            è©•ä¾¡ã®ç¨®é¡ã€‚
            'like'ã¯é«˜è©•ä¾¡ã€'dislike'ã¯ä½è©•ä¾¡ã€'null'ã¯é«˜è©•ä¾¡ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€‚
          enum:
            - like
            - dislike
            - null
        user:
          type: string
          description: |
            ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€‚é–‹ç™ºè€…ã®ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã€
            ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
          example: "abc-123"
        content:
          type: string
          description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å†…å®¹ã€‚
          example: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æƒ…å ±"
      required:
        - rating
        - user

    AppFeedbackItem:
      type: object
      description: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å€‹åˆ¥ã®é …ç›®ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        id:
          type: string
          format: uuid
        app_id:
          type: string
          format: uuid
        conversation_id:
          type: string
          format: uuid
        message_id:
          type: string
          format: uuid
        rating:
          type: string
          enum:
            - like
            - dislike
            - null
        content:
          type: string
        from_source:
          type: string
        from_end_user_id:
          type: string
          format: uuid
        from_account_id:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    AppFeedbacksResponse:
      type: object
      description: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ãƒªã‚¹ãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/AppFeedbackItem"

    SuggestedQuestionsResponse:
      type: object
      description: ææ¡ˆã•ã‚Œã‚‹è³ªå•ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        result:
          type: string
          example: "success"
        data:
          type: array
          items:
            type: string
          example:
            - "a"
            - "b"
            - "c"

    MessageFile:
      type: object
      description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        id:
          type: string
        type:
          type: string
          description: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã€‚'image'ã¯ç”»åƒç”¨ã€‚
        url:
          type: string
          description: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒURLã€‚
          format: uri
        belongs_to:
          type: string
          description: æ‰€å±ã€‚'user'ã¾ãŸã¯'assistant'ã€‚

    MessageHistoryItem:
      type: object
      description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã®å€‹åˆ¥ã®é …ç›®ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        id:
          type: string
          description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
        conversation_id:
          type: string
          description: ä¼šè©±IDã€‚
        inputs:
          type: object
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚
          additionalProperties: true
        query:
          type: string
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›/è³ªå•å†…å®¹ã€‚
        answer:
          type: string
          description: å¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ã€‚
        message_files:
          type: array
          items:
            $ref: "#/components/schemas/MessageFile"
        feedback:
          type: object
          properties:
            rating:
              type: string
              enum:
                - like
                - dislike
          nullable: true
        retriever_resources:
          type: array
          items:
            $ref: "#/components/schemas/RetrieverResource"
        created_at:
          type: integer
          description: "ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚"

    MessageHistoryResponse:
      type: object
      description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã®ãƒªã‚¹ãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        limit:
          type: integer
          description: è¿”ã•ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã®æ•°ã€‚å…¥åŠ›ãŒã‚·ã‚¹ãƒ†ãƒ åˆ¶é™ã‚’è¶…ãˆã‚‹å ´åˆã¯ã€ã‚·ã‚¹ãƒ†ãƒ åˆ¶é™ãŒè¿”ã•ã‚Œã¾ã™ã€‚
        has_more:
          type: boolean
          description: æ¬¡ã®ãƒšãƒ¼ã‚¸ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã€‚
        data:
          type: array
          items:
            $ref: "#/components/schemas/MessageHistoryItem"

    ConversationItem:
      type: object
      description: ä¼šè©±ã®å€‹åˆ¥ã®é …ç›®ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        id:
          type: string
          description: ä¼šè©±IDã€‚
        name:
          type: string
          description: ä¼šè©±åã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯LLMã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚Œã¾ã™ã€‚
        inputs:
          type: object
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚
          additionalProperties: true
        introduction:
          type: string
          description: å°å…¥æ–‡ã€‚
        status:
          type: string
        created_at:
          type: integer
          description: "ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚"
        updated_at:
          type: integer
          description: "æ›´æ–°æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆUnixæ™‚é–“ã€ä¾‹: 1705395332ï¼‰ã€‚"

    ConversationsResponse:
      type: object
      description: ä¼šè©±ã®ãƒªã‚¹ãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        limit:
          type: integer
        has_more:
          type: boolean
        data:
          type: array
          items:
            $ref: "#/components/schemas/ConversationItem"

    RenameConversationRequest:
      type: object
      description: ä¼šè©±åã‚’å¤‰æ›´ã™ã‚‹éš›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        name:
          type: string
          description: (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) ä¼šè©±åã€‚`auto_generate`ãŒ`true`ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯çœç•¥å¯èƒ½ã§ã™ã€‚
        auto_generate:
          type: boolean
          description: (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) ã‚¿ã‚¤ãƒˆãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‹ã©ã†ã‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯`false`ã§ã™ã€‚
          default: false
        user:
          type: string
          description: |
            ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€‚é–‹ç™ºè€…ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã€
            ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
      required:
        - user

    ConversationVariable:
      type: object
      description: ä¼šè©±å¤‰æ•°ã®å€‹åˆ¥ã®é …ç›®ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        id:
          type: string
          description: å¤‰æ•°IDã€‚
        name:
          type: string
          description: å¤‰æ•°åã€‚
        value_type:
          type: string
          description: å¤‰æ•°ã®å‹ï¼ˆstring, number, booleanãªã©ï¼‰ã€‚
        value:
          type: string
          description: å¤‰æ•°ã®å€¤ã€‚
        description:
          type: string
          description: å¤‰æ•°ã®èª¬æ˜ã€‚
        created_at:
          type: integer
          description: ä½œæˆæ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€‚
        updated_at:
          type: integer
          description: æœ€çµ‚æ›´æ–°æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€‚

    ConversationVariablesResponse:
      type: object
      description: ä¼šè©±å¤‰æ•°ã®ãƒªã‚¹ãƒˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        limit:
          type: integer
          description: ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ã‚¢ã‚¤ãƒ†ãƒ æ•°ã€‚
        has_more:
          type: boolean
          description: ã•ã‚‰ã«ã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ã‚‹ã‹ã©ã†ã‹ã€‚
        data:
          type: array
          items:
            $ref: "#/components/schemas/ConversationVariable"

    AudioToTextRequest:
      type: object
      description: éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å¤‰æ›ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        file:
          type: string
          format: binary
          description: |
            éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã€‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å½¢å¼: ['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm']ã€‚
            ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™: 15MBã€‚
        user:
          type: string
          description: |
            ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€‚é–‹ç™ºè€…ã®ãƒ«ãƒ¼ãƒ«ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã€
            ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
      required:
        - file
        - user

    AudioToTextResponse:
      type: object
      description: éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å¤‰æ›å¾Œã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        text:
          type: string
          description: å‡ºåŠ›ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã€‚
          example: ""

    TextToAudioRequest:
      type: object
      description: ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³å£°ã¸ã®å¤‰æ›ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        message_id:
          type: string
          description: |
            Difyã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å ´åˆã€ç”Ÿæˆã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã‚’ç›´æ¥æ¸¡ã—ã¾ã™ã€‚
            ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã‚’ä½¿ç”¨ã—ã¦å¯¾å¿œã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¦‹ã¤ã‘ã€ç›´æ¥éŸ³å£°æƒ…å ±ã‚’åˆæˆã—ã¾ã™ã€‚
            `message_id`ã¨`text`ã®ä¸¡æ–¹ãŒæä¾›ã•ã‚ŒãŸå ´åˆã€`message_id`ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚
          example: "5ad4cb98-f0c7-4085-b384-88c403be6290"
        text:
          type: string
          description: éŸ³å£°ç”Ÿæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚
          example: "Hello Dify"
        user:
          type: string
          description: |
            ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€‚é–‹ç™ºè€…ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã€
            ã‚¢ãƒ—ãƒªå†…ã§ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
          example: "abc-123"
      required:
        - user

    AppInfoResponse:
      type: object
      description: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬æƒ…å ±ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        name:
          type: string
          description: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åã€‚
        description:
          type: string
          description: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èª¬æ˜ã€‚
        tags:
          type: array
          items:
            type: string

    AppParametersResponse:
      type: object
      description: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨è¨­å®šã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        opening_statement:
          type: string
          description: ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ã®æŒ¨æ‹¶æ–‡ã€‚
        suggested_questions_after_answer:
          type: object
          description: å›ç­”å¾Œã®è³ªå•ææ¡ˆæ©Ÿèƒ½ã«é–¢ã™ã‚‹è¨­å®šã€‚
          properties:
            enabled:
              type: boolean
              description: ã“ã®æ©Ÿèƒ½ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€‚
        speech_to_text:
          type: object
          description: éŸ³å£°èªè­˜ï¼ˆSpeech-to-Textï¼‰æ©Ÿèƒ½ã«é–¢ã™ã‚‹è¨­å®šã€‚
          properties:
            enabled:
              type: boolean
              description: ã“ã®æ©Ÿèƒ½ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€‚
        text_to_speech:
          type: object
          description: éŸ³å£°åˆæˆï¼ˆText-to-Speechï¼‰æ©Ÿèƒ½ã«é–¢ã™ã‚‹è¨­å®šã€‚
          properties:
            enabled:
              type: boolean
              description: ã“ã®æ©Ÿèƒ½ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€‚
            voice:
              type: string
              description: éŸ³å£°ã®ç¨®é¡ã€‚
            language:
              type: string
              description: è¨€èªã€‚
            autoPlay:
              type: string
              enum:
                - enabled
                - disabled
              description: è‡ªå‹•å†ç”Ÿã€‚
        retriever_resource:
          type: object
          description: æ¤œç´¢ãƒªã‚½ãƒ¼ã‚¹è¡¨ç¤ºã«é–¢ã™ã‚‹è¨­å®šã€‚
          properties:
            enabled:
              type: boolean
              description: ã“ã®æ©Ÿèƒ½ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€‚
        annotation_reply:
          type: object
          description: ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¿”ä¿¡æ©Ÿèƒ½ã«é–¢ã™ã‚‹è¨­å®šã€‚
          properties:
            enabled:
              type: boolean
              description: ã“ã®æ©Ÿèƒ½ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€‚
        user_input_form:
          type: array
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®è¦ç´ ãƒªã‚¹ãƒˆã€‚
          items:
            type: object
            properties:
              text-input:
                type: object
                description: ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¨­å®šã€‚
                properties:
                  label:
                    type: string
                  variable:
                    type: string
                  required:
                    type: boolean
                  default:
                    type: string
              paragraph:
                type: object
                description: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¨­å®šã€‚
                properties:
                  label:
                    type: string
                  variable:
                    type: string
                  required:
                    type: boolean
                  default:
                    type: string
              select:
                type: object
                description: ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¨­å®šã€‚
                properties:
                  label:
                    type: string
                  variable:
                    type: string
                  required:
                    type: boolean
                  default:
                    type: string
                  options:
                    type: array
                    items:
                      type: string
        file_upload:
          type: object
          description: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«é–¢ã™ã‚‹è¨­å®šã€‚
          properties:
            image:
              type: object
              description: ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®è¨­å®šã€‚
              properties:
                enabled:
                  type: boolean
                  description: ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€‚
                number_limits:
                  type: integer
                  description: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½ãªç”»åƒã®æœ€å¤§æ•°ã€‚
                detail:
                  type: string
                transfer_methods:
                  type: array
                  items:
                    type: string
                    enum:
                      - remote_url
                      - local_file
        system_parameters:
          type: object
          description: ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨åˆ¶é™ã€‚
          properties:
            file_size_limit:
              type: integer
              description: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆMBï¼‰ã€‚
            image_file_size_limit:
              type: integer
              description: ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆMBï¼‰ã€‚
            audio_file_size_limit:
              type: integer
              description: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆMBï¼‰ã€‚
            video_file_size_limit:
              type: integer
              description: ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆMBï¼‰ã€‚

    ToolIconObject:
      type: object
      description: ãƒ„ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        background:
          type: string
          description: èƒŒæ™¯è‰²ï¼ˆHEXå½¢å¼ï¼‰ã€‚
        content:
          type: string
          description: çµµæ–‡å­—ã€‚

    MetaResponse:
      type: object
      description: ãƒ¡ã‚¿æƒ…å ±ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        tool_icons:
          type: object
          description: ãƒ„ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ã€‚ã‚­ãƒ¼ã¯ãƒ„ãƒ¼ãƒ«åã€å€¤ã¯ã‚¢ã‚¤ã‚³ãƒ³ã®URLã¾ãŸã¯`ToolIconObject`ã€‚
          additionalProperties:
            oneOf:
              - type: string
                format: uri
                description: ã‚¢ã‚¤ã‚³ãƒ³ã®URLã€‚
              - $ref: "#/components/schemas/ToolIconObject"

    WebAppSettingResponse:
      type: object
      description: Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        title:
          type: string
          description: WebAppã®åå‰ã€‚
        chat_color_theme:
          type: string
          description: ãƒãƒ£ãƒƒãƒˆã®ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒï¼ˆHEXå½¢å¼ï¼‰ã€‚
        chat_color_theme_inverted:
          type: boolean
          description: ãƒãƒ£ãƒƒãƒˆã®ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒã‚’åè»¢ã™ã‚‹ã‹ã©ã†ã‹ã€‚
        icon_type:
          type: string
          description: ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¿ã‚¤ãƒ—ã€‚'emoji'ã¾ãŸã¯'image'ã€‚
          enum:
            - emoji
            - image
        icon:
          type: string
          description: ã‚¢ã‚¤ã‚³ãƒ³ã€‚`icon_type`ãŒ'emoji'ã®å ´åˆã¯çµµæ–‡å­—ã€'image'ã®å ´åˆã¯ç”»åƒURLã€‚
        icon_background:
          type: string
          description: èƒŒæ™¯è‰²ï¼ˆHEXå½¢å¼ï¼‰ã€‚
        icon_url:
          type: string
          description: ã‚¢ã‚¤ã‚³ãƒ³ã®URLã€‚
          format: uri
          nullable: true
        description:
          type: string
          description: èª¬æ˜ã€‚
        copyright:
          type: string
          description: è‘—ä½œæ¨©æƒ…å ±ã€‚
        privacy_policy:
          type: string
          description: ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã¸ã®ãƒªãƒ³ã‚¯ã€‚
          format: uri
        custom_disclaimer:
          type: string
          description: ã‚«ã‚¹ã‚¿ãƒ å…è²¬äº‹é …ã€‚
        default_language:
          type: string
          description: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨€èªã€‚
        show_workflow_steps:
          type: boolean
          description: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®è©³ç´°ã‚’è¡¨ç¤ºã™ã‚‹ã‹ã©ã†ã‹ã€‚
        use_icon_as_answer_icon:
          type: boolean
          description: WebAppã‚¢ã‚¤ã‚³ãƒ³ã‚’ãƒãƒ£ãƒƒãƒˆã§ğŸ¤–ã«ç½®ãæ›ãˆã‚‹ã‹ã©ã†ã‹ã€‚

    ErrorResponse:
      type: object
      description: ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ä¸€èˆ¬çš„ãªæ§‹é€ ã‚’å®šç¾©ã—ã¾ã™ã€‚
      properties:
        status:
          type: integer
          description: HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã€‚
        code:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã€‚
        message:
          type: string
          description: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚
      required:
        - status
        - code
        - message

  responses:
    UnauthorizedError:
      description: èªè¨¼ã‚¨ãƒ©ãƒ¼ã€‚APIã‚­ãƒ¼ãŒç„¡åŠ¹ã§ã™ã€‚
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          example:
            status: 401
            code: "unauthorized"
            message: "Unauthorized."

    NotFoundError:
      description: ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            ConversationNotFound:
              value:
                status: 404
                code: "conversation_not_exists"
                message: "Conversation not exists."

    BadRequestError:
      description: ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‚å…¥åŠ›ãŒç„¡åŠ¹ã§ã‚ã‚‹ã‹ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            InvalidParam:
              value:
                status: 400
                code: "invalid_param"
                message: "ç•°å¸¸ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å…¥åŠ›"
            AppUnavailable:
              value:
                status: 400
                code: "app_unavailable"
                message: "ã‚¢ãƒ—ãƒªæ§‹æˆãŒåˆ©ç”¨ã§ãã¾ã›ã‚“"
            ProviderNotInitialize:
              value:
                status: 400
                code: "provider_not_initialize"
                message: "åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«è³‡æ ¼æƒ…å ±æ§‹æˆãŒã‚ã‚Šã¾ã›ã‚“"
            ProviderQuotaExceeded:
              value:
                status: 400
                code: "provider_quota_exceeded"
                message: "ãƒ¢ãƒ‡ãƒ«å‘¼ã³å‡ºã—ã‚¯ã‚©ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™"
            ModelNotSupport:
              value:
                status: 400
                code: "model_currently_not_support"
                message: "ç¾åœ¨ã®ãƒ¢ãƒ‡ãƒ«ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“"
            CompletionRequestError:
              value:
                status: 400
                code: "completion_request_error"
                message: "ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ"
            NoFileUploaded:
              value:
                status: 400
                code: "no_file_uploaded"
                message: "ãƒ•ã‚¡ã‚¤ãƒ«ãŒæä¾›ã•ã‚Œãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“"
            TooManyFiles:
              value:
                status: 400
                code: "too_many_files"
                message: "ç¾åœ¨ã¯1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å—ã‘ä»˜ã‘ã¾ã™"
            UnsupportedPreview:
              value:
                status: 400
                code: "unsupported_preview"
                message: "ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“"
            UnsupportedEstimate:
              value:
                status: 400
                code: "unsupported_estimate"
                message: "ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ¨å®šã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“"
            UnsupportedFileType:
              value:
                status: 400
                code: "unsupported_file_type"
                message: "ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„æ‹¡å¼µå­ã€ç¾åœ¨ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å—ã‘ä»˜ã‘ã¾ã™"

    RequestEntityTooLarge:
      description: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒå¤§ãã™ãã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§ãã™ãã¾ã™ã€‚
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            FileTooLarge:
              value:
                status: 413
                code: "file_too_large"
                message: "ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§ãã™ãã¾ã™"

    UnsupportedMediaType:
      description: ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã§ã™ã€‚
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            UnsupportedFileType:
              value:
                status: 415
                code: "unsupported_file_type"
                message: "ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„æ‹¡å¼µå­ã€ç¾åœ¨ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å—ã‘ä»˜ã‘ã¾ã™"

    ServiceUnavailable:
      description: ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚S3ã‚µãƒ¼ãƒ“ã‚¹ã¾ãŸã¯æ¨©é™ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
          examples:
            S3ConnectionFailed:
              value:
                status: 503
                code: "S3_connection_failed"
                message: "S3æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ"
            S3PermissionsError:
              value:
                status: 503
                code: "S3_permissions_error"
                message: "S3æ¨©é™ã‚¨ãƒ©ãƒ¼"

  parameters:
    user:
      name: user
      in: query
      required: true
      description: ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€‚
      schema:
        type: string
        example: "abc-123"
    conversation_id:
      name: conversation_id
      in: query
      required: true
      description: ä¼šè©±IDã€‚
      schema:
        type: string
        format: uuid
        example: "9a2a9e32-a5b6-4b2a-8c1d-1e2a3b4c5d6e"
    message_id:
      name: message_id
      in: query
      required: true
      description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã€‚
      schema:
        type: string
        format: uuid
        example: "7b1d9e32-a5b6-4b2a-8c1d-1e2a3b4c5d6f"
    limit:
      name: limit
      in: query
      required: false
      description: è¿”ã•ã‚Œã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã®æœ€å¤§æ•°ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯20ã€æœ€å¤§100ã€‚
      schema:
        type: integer
        default: 20
        maximum: 100
    first_id:
      name: first_id
      in: query
      required: false
      description: |
        æŒ‡å®šã•ã‚ŒãŸIDã‚ˆã‚Šå¤ã„/æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€
        ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã®ãŸã‚ã®IDã€‚
        `limit`ã¨åˆã‚ã›ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
      schema:
        type: string
        example: "9a2a9e32-a5b6-4b2a-8c1d-1e2a3b4c5d6e"

paths:
  /chat-messages:
    post:
      summary: ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
      operationId: chat
      description: æ–°ã—ã„ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’Difyã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é€ä¿¡ã—ã€å¿œç­”ã‚’å–å¾—ã—ã¾ã™ã€‚
      requestBody:
        description: ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ã€‚
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ChatCompletionRequest"
      responses:
        "200":
          description: ãƒãƒ£ãƒƒãƒˆå¿œç­”ã€‚`response_mode`ãŒ`blocking`ã®å ´åˆã¯JSONã€`streaming`ã®å ´åˆã¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§è¿”ã•ã‚Œã¾ã™ã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ChatCompletionResponse"
            text/event-stream:
              schema:
                $ref: "#/components/schemas/ChunkCompletionResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /files/upload:
    post:
      summary: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
      operationId: uploadFile
      description: ãƒãƒ£ãƒƒãƒˆã§ä½¿ç”¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€‚
                user:
                  type: string
                  description: ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€‚
              required:
                - file
                - user
      responses:
        "200":
          description: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æˆåŠŸã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/FileUploadResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "413":
          $ref: "#/components/responses/RequestEntityTooLarge"
        "415":
          $ref: "#/components/responses/UnsupportedMediaType"
        "503":
          $ref: "#/components/responses/ServiceUnavailable"

  /stop-generate:
    post:
      summary: ç”Ÿæˆã‚’åœæ­¢
      operationId: stopGenerate
      description: å®Ÿè¡Œä¸­ã®ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆã‚’åœæ­¢ã—ã¾ã™ã€‚
      requestBody:
        description: ç”Ÿæˆåœæ­¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‚
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/StopGenerateRequest"
      responses:
        "200":
          description: ç”Ÿæˆåœæ­¢æˆåŠŸã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /messages/{message_id}/feedbacks:
    post:
      summary: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
      operationId: feedbackMessage
      description: ç‰¹å®šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾ã—ã¦ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆé«˜è©•ä¾¡/ä½è©•ä¾¡ï¼‰ã‚’é€ä¿¡ã—ã¾ã™ã€‚
      parameters:
        - $ref: "#/components/parameters/message_id"
      requestBody:
        description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å†…å®¹ã€‚
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MessageFeedbackRequest"
      responses:
        "200":
          description: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æˆåŠŸã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /messages/{message_id}/suggested-questions:
    get:
      summary: ææ¡ˆã•ã‚Œã‚‹è³ªå•ã‚’å–å¾—
      operationId: getSuggestedQuestions
      description: ç‰¹å®šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«é–¢é€£ã™ã‚‹ææ¡ˆã•ã‚Œã‚‹è³ªå•ã®ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚
      parameters:
        - $ref: "#/components/parameters/message_id"
        - $ref: "#/components/parameters/user"
      responses:
        "200":
          description: ææ¡ˆã•ã‚Œã‚‹è³ªå•ã®ãƒªã‚¹ãƒˆã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuggestedQuestionsResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /messages:
    get:
      summary: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã‚’å–å¾—
      operationId: getMessageHistory
      description: ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã‚’å–å¾—ã—ã¾ã™ã€‚
      parameters:
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/limit"
        - $ref: "#/components/parameters/first_id"
      responses:
        "200":
          description: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã®ãƒªã‚¹ãƒˆã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MessageHistoryResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /conversations:
    get:
      summary: ä¼šè©±å±¥æ­´ã‚’å–å¾—
      operationId: getConversationHistory
      description: ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¼šè©±å±¥æ­´ã‚’å–å¾—ã—ã¾ã™ã€‚
      parameters:
        - $ref: "#/components/parameters/user"
        - $ref: "#/components/parameters/limit"
        - $ref: "#/components/parameters/first_id"
      responses:
        "200":
          description: ä¼šè©±å±¥æ­´ã®ãƒªã‚¹ãƒˆã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConversationsResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /conversations/{conversation_id}/rename:
    post:
      summary: ä¼šè©±åã‚’å¤‰æ›´
      operationId: renameConversation
      description: ç‰¹å®šã®ä¼šè©±ã®åå‰ã‚’å¤‰æ›´ã—ã¾ã™ã€‚
      parameters:
        - $ref: "#/components/parameters/conversation_id"
      requestBody:
        description: ä¼šè©±åå¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‚
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RenameConversationRequest"
      responses:
        "200":
          description: ä¼šè©±åå¤‰æ›´æˆåŠŸã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConversationItem"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /conversations/{conversation_id}/variables:
    get:
      summary: ä¼šè©±å¤‰æ•°ã‚’å–å¾—
      operationId: getConversationVariables
      description: ç‰¹å®šã®ä¼šè©±ã«é–¢é€£ã™ã‚‹å¤‰æ•°ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚
      parameters:
        - $ref: "#/components/parameters/conversation_id"
        - $ref: "#/components/parameters/user"
      responses:
        "200":
          description: ä¼šè©±å¤‰æ•°ã®ãƒªã‚¹ãƒˆã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ConversationVariablesResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "404":
          $ref: "#/components/responses/NotFoundError"

  /audio-to-text:
    post:
      summary: éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸å¤‰æ›
      operationId: audioToText
      description: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚
      requestBody:
        description: éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å¤‰æ›ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‚
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/AudioToTextRequest"
      responses:
        "200":
          description: éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸ã®å¤‰æ›æˆåŠŸã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AudioToTextResponse"
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
        "413":
          $ref: "#/components/responses/RequestEntityTooLarge"
        "415":
          $ref: "#/components/responses/UnsupportedMediaType"

  /text-to-audio:
    post:
      summary: ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³å£°ã¸å¤‰æ›
      operationId: textToAudio
      description: ãƒ†ã‚­ã‚¹ãƒˆã‚’éŸ³å£°ã«å¤‰æ›ã—ã¾ã™ã€‚
      requestBody:
        description: ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³å£°ã¸ã®å¤‰æ›ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‚
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TextToAudioRequest"
      responses:
        "200":
          description: ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³å£°ã¸ã®å¤‰æ›æˆåŠŸã€‚
          content:
            audio/mpeg:
              schema:
                type: string
                format: binary
                description: éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ (MPEGå½¢å¼)ã€‚
        "400":
          $ref: "#/components/responses/BadRequestError"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /app/info:
    get:
      summary: ã‚¢ãƒ—ãƒªæƒ…å ±ã‚’å–å¾—
      operationId: getAppInfo
      description: Difyã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
      responses:
        "200":
          description: ã‚¢ãƒ—ãƒªæƒ…å ±ã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AppInfoResponse"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /app/parameters:
    get:
      summary: ã‚¢ãƒ—ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
      operationId: getAppParameters
      description: Difyã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ§˜ã€…ãªè¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚
      responses:
        "200":
          description: ã‚¢ãƒ—ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AppParametersResponse"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /app/web-app-settings:
    get:
      summary: Webã‚¢ãƒ—ãƒªè¨­å®šã‚’å–å¾—
      operationId: getWebAppSettings
      description: Dify Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºè¨­å®šã‚’å–å¾—ã—ã¾ã™ã€‚
      responses:
        "200":
          description: Webã‚¢ãƒ—ãƒªè¨­å®šã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WebAppSettingResponse"
        "401":
          $ref: "#/components/responses/UnauthorizedError"

  /app/meta:
    get:
      summary: ãƒ¡ã‚¿æƒ…å ±ã‚’å–å¾—
      operationId: getAppMeta
      description: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¿æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
      responses:
        "200":
          description: ãƒ¡ã‚¿æƒ…å ±ã€‚
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MetaResponse"
        "401":
          $ref: "#/components/responses/UnauthorizedError"
